<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>客户_手动创建页面_给固定模板</title>
		<link rel="stylesheet" href="../../css/pc/public/public.css" />
		<link rel="stylesheet" href="../../css/pc/edit_index.css" />
	</head>
	<style>

	</style>

	<body>
		<div class="wrapper" id="edit_app_wrap">
			<div class="tab">
				<ul class="tabs clearfloat">
					<li class="active">
						<a href="" data-toggle="0">首页编辑</a>
					</li>
					<li>
						<a href="" data-toggle="1">分类</a>
					</li>
					<li>
						<a href="" data-toggle="2">购物车</a>
					</li>
					<li>
						<a href="" data-toggle="3">个人中心</a>
					</li>
				</ul>
			</div>
			<!--首页编辑-->
			<div class="content clearfloat">
				<!--left box-->
				<div class="left_box">
					<!--功能插件-->
					<div class="left_box_fun_box clearfloat">
						<p class="fun_box_top">功能插件</p>
						<div class="fun_box_content clearfloat">
							<!--项-->
							<p class="fun_box_content_term" v-for="(v,i) in componentTerm" @click="comTremFun(v.id)">{{v.name}}</p>
						</div>
					</div>
				</div>
				<!--中间 box-->
				<div class="middle_box">
					<!--绝对定位=>设置图片，模拟手机-->
					<p class="phone_top"></p>
					<p class="phone_left"></p>
					<p class="phone_right"></p>
					<!--模拟手机的 wrap，背景图两边（img）-->
					<div class="html_wrpa">
						<!--水平居中-->
						<div class="html_box">
							<!--隐藏滚动条-->
							<div class="html_box_new">
								<!--拖拽-包着拖拽的div-->
								<div class="drag_box" v-for="(v,i) in backData" draggable="true" @dragstart="handleDragStart($event, v)" @dragover.prevent="handleDragOver($event, v)" @dragenter="handleDragEnter($event, v)" @dragend="handleDragEnd($event, v)">
									<!--轮播图 box，拖拽的div-->
									<div class="modle_box" v-if="v.id == 'rotationId'? true:''" :key="v.id" @click="editMode(v.id,v.key_num)">
										<div class="slide">
											<div class="slide_item">
												<img :src="v.data.images[0].imgUrl" alt="" />
											</div>
											<div class="slide_but" :class="v.params.butPosition">
												<span v-for="(val,index) in v.data.images" :class="v.params.butStyle" :style="{'background':index == 0?v.params.clickColor:v.params.butColor}"></span>
											</div>
										</div>
										<!--删除按钮 wrap-->
										<div class="cursor_wrap">
											<p class="cursor_box_del" @click.stop="delDataFun(i)">移除</p>
										</div>
										<!--选中-虚框-->
										<p class="border_line" :class="puStateObj['key_num'] == i ? 'border_box' : ''"></p>
									</div>

									<!--搜索模块 box，拖拽的div-->
									<div class="modle_box" v-if="v.id == 'searchId'? true:''" :key="v.id" @click="editMode(v.id,v.key_num)">
										搜索
										<!--删除按钮 wrap-->
										<div class="cursor_wrap">
											<p class="cursor_box_del" @click.stop="delDataFun(i)">删除</p>
										</div>
										<!--选中-虚框-->
										<p class="border_line" :class="puStateObj['key_num'] == i ? 'border_box' : ''"></p>
									</div>
									<!--按钮组 模块 box-->
									<div class="modle_box" v-if="v.id == 'bottonsId'? true:''" :key="v.id" @click="editMode(v.id,v.key_num)">
										<div class="modle_bottons rim-mod-select modle-mod " style="background-color: rgb(255, 255, 255);">
											<div class="botton-scope">
												<a href="unsafe:javascript:;">
													<div class="modle_mod_nav" style="width: 20%;">
														<div class="modle_mod_img">
															<img src="../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg" style=" height: 39px;">
														</div>
														<div class="modle_mod_text">按钮文字</div>
													</div>
												</a>
											</div>
											<div class="botton-scope">
												<a href="unsafe:javascript:;">
													<div class="modle_mod_nav" style="width: 20%;">
														<div class="modle_mod_img">
															<img src="../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg" style=" height: 39px;">
														</div>
														<div class="modle_mod_text">按钮文字</div>
													</div>
												</a>
											</div>
											<div class="botton-scope">
												<a href="unsafe:javascript:;">
													<div class="modle_mod_nav" style="width: 20%;">
														<div class="modle_mod_img">
															<img src="../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg" style=" height: 39px;">
														</div>
														<div class="modle_mod_text">按钮文字</div>
													</div>
												</a>
											</div>
											<div class="botton-scope">
												<a href="unsafe:javascript:;">
													<div class="modle_mod_nav" style="width: 20%;">
														<div class="modle_mod_img">
															<img src="../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg" style="border-radius: 0px; height: 39px;">
														</div>
														<div class="modle_mod_text">按钮文字</div>
													</div>
												</a>
											</div>
											<div class="botton-scope">
												<a href="unsafe:javascript:;">
													<div class="modle_mod_nav" style="width: 20%;">
														<div class="modle_mod_img">
															<img src="../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg" style="border-radius: 0px; height: 39px;">
														</div>
														<div class="modle_mod_text">按钮文字</div>
													</div>
												</a>
											</div>
										</div>
										<!--删除按钮 wrap-->
										<div class="cursor_wrap">
											<p class="cursor_box_del" @click.stop="delDataFun(i)">删除</p>
										</div>
										<!--选中-虚框-->
										<p class="border_line" :class="puStateObj['key_num'] == i ? 'border_box' : ''"></p>
									</div>
									<!--商品组-->
									<!--商品组-->
									<div class="modle_box" v-if="v.id == 'productListId'? true:''" :key="v.id" @click="editMode(v.id,v.key_num)">
										<div class="modle_shop clearfloat">
											<div class="modle_shop_title">请填写商品组标题</div>
											<!-- 显示一个 -->
											<div class="modle_shop_item">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
											<div class="modle_shop_item">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
											<!-- 显示俩个--(结构一样) -->
											<div class="modle_shop_item2">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
											<div class="modle_shop_item2">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
											<!-- 显示三个--(结构一样) -->
											<div class="modle_shop_item3">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
											<div class="modle_shop_item3">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
											<div class="modle_shop_item3">
												<div class="modle_shop_img">
													<img src="../../img/0004.png" alt="">
													<div class="modle_shop_attr"></div>
													<div class="modle_shop_price">
														￥66666.00<s>￥88888.00</s>
													</div>
												</div>
												<div class="modle_shop_info">
													<div class="modle_shop_name">
														富土康带盐人
													</div>
													<div class="modle_shop_buybtn"></div>
												</div>
											</div>
										</div>
										<!--删除按钮 wrap-->
										<div class="cursor_wrap">
											<p class="cursor_box_del" @click.stop="delDataFun(i)">删除</p>
										</div>
										<!--选中-虚框-->
										<p class="border_line" :class="puStateObj['key_num'] == i ? 'border_box' : ''"></p>
									</div>
									
									
								</div>

							</div>
							<!--隐藏滚动条-->

						</div>
					</div>
					<!--模拟手机的 wrap，背景图两边（img）-->
					<p class="phone_bottom"></p>
				</div>
				<!--编辑模板 box-->
				<div class="right_box">
					<!-- 轮播图--编辑 -->
					<div class="edit_modle" v-show="puStateObj['id'] == 'rotationId'">
						<div class="edit_slide">
							<div class="slide_title">轮播设置<span>提示:轮播图片的大小必须一样哦~</span></div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">按钮形状</span>
								<label class="edit_slide_content_label"><input type="radio" v-model="backData[puStateObj['key_num']].params.butStyle" value="rectangle">长方形</label>
								<label class="edit_slide_content_label"><input type="radio" v-model="backData[puStateObj['key_num']].params.butStyle" value="square">正方形</label>
								<label class="edit_slide_content_label"><input type="radio" v-model="backData[puStateObj['key_num']].params.butStyle" value="roundness">圆形</label>
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">按钮位置</span>
								<label class="edit_slide_content_label"><input type="radio" v-model="backData[puStateObj['key_num']].params.butPosition" value="left">按钮居左</label>
								<label class="edit_slide_content_label"><input type="radio" v-model="backData[puStateObj['key_num']].params.butPosition" value="center">按钮居中</label>
								<label class="edit_slide_content_label"><input type="radio" v-model="backData[puStateObj['key_num']].params.butPosition" value="right">按钮居右</label>

							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">按钮背景颜色</span>
								<input type="color" v-model="backData[puStateObj['key_num']].params.butColor" value="backData[puStateObj['key_num']].params.butColor">
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">按钮点击颜色</span>
								<input type="color" v-model="backData[puStateObj['key_num']].params.clickColor" value="backData[puStateObj['key_num']].params.clickColor">
							</div>
							<!--轮播图-上传图片 -->
							<div class="edit_slide_addimg"  v-for="(v,i) in backData[puStateObj['key_num']]['data']['images']">
								<div class="edit_slide_img hover_box" @click="call_off(i)">
									<img :src="v.imgUrl" alt="">
								</div>
								<div class="edit_slide_link">
									<label>选择链接<input type="text" placeholder="请手动输入链接(请以http://开头)" v-model="v.url"></label>
									<button>系统连接</button>
								</div>
								<!--删除按钮-->
								<div class="edit_slide_del" @click="">
									<img src="../../img/pc/delete_icon.png" alt="">
								</div>
							</div>
							
						</div>
					</div>
					
					<!-- 商品组--编辑 -->
					<div class="edit_modle" v-show="puStateObj['id'] == 'productListId'">
						<div class="edit_shop">
							<div class="slide_title">商品设置<span>提示: 商品组的图标可通过替换目录文件自定义</span></div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">样式选择</span>
								<label class="edit_slide_content_label"><input type="radio" value="">横排显示</label>
								<label class="edit_slide_content_label"><input type="radio" value="">双排显示</label>
								<label class="edit_slide_content_label"><input type="radio" value="">三排显示</label>
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">显示标题</span>
								<label class="edit_slide_content_label"><input type="radio" value="">显示</label>
								<label class="edit_slide_content_label"><input type="radio" value="">不显示</label>
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">分组标题</span>
								<input type="text" placeholder="搜索框默认提示文字，超出屏幕宽度将自动隐藏">
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">标题颜色</span>
								<input type="color" v-model="backData[puStateObj['key_num']].params.clickColor" value="backData[puStateObj['key_num']].params.clickColor">
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">商品属性</span>
								<label class="edit_slide_content_label"><input type="radio" value="">无</label>
								<label class="edit_slide_content_label"><input type="radio" value="">推荐</label>
								<label class="edit_slide_content_label"><input type="radio" value="">热销</label>
								<label class="edit_slide_content_label"><input type="radio" value="">新上</label>
								<label class="edit_slide_content_label"><input type="radio" value="">包邮</label>
								<label class="edit_slide_content_label"><input type="radio" value="">限时</label>
								<label class="edit_slide_content_label"><input type="radio" value="">促销</label>
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">商品价格</span>
								<label class="edit_slide_content_label"><input type="radio" value="">不显示</label>
								<label class="edit_slide_content_label"><input type="radio" value="">原价+现价</label>
								<label class="edit_slide_content_label"><input type="radio" value="">只显示现价</label>
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">商品名称</span>
								<label class="edit_slide_content_label"><input type="radio" value="">不显示</label>
								<label class="edit_slide_content_label"><input type="radio" value="">显示</label>
								<span>提示:隐藏商品名称将默认隐藏购买按钮</span>
							</div>
							<div class="edit_slide_content">
								<span class="edit_slide_content_title">购买按钮</span>
								<label class="edit_slide_content_label"><input type="radio" value="">不显示</label>
								<label class="edit_slide_content_label"><input type="radio" value="">样式一</label>
								<label class="edit_slide_content_label"><input type="radio" value="">样式二</label>
								<label class="edit_slide_content_label"><input type="radio" value="">样式三</label>
								<label class="edit_slide_content_label"><input type="radio" value="">样式四</label>
							</div>
						</div>
					</div>
					
					
					<!--在该div=>最下边 遮罩层 -->
					<div class="slide_mask" v-if="active.edit_slide_mask">
						<div class="slide_mask_content">
							<div class="mask_content_title">
								<span>图片</span>
								<span @click="call_off()"><img class="del_icon hover_box" src="../../img/pc/delete_icon.png"/></span>
							</div>
							<div class="mask_content">
								<div class="mask_content_tab clearfloat">
									<span :class="{active:active.edit_slide}" @click="tabs">本地上传</span>
									<span :class="{active:!active.edit_slide}" @click="tabs">网络图片</span>
								</div>
								<div class="mask_content_list2" v-if="active.edit_slide">
									<div class="mask_content_item">
										<label>上传文件</label>
										<input type="text" v-model="upImages.name">
										<input class="type1" type="file" @change="up_imageFun($event)" accept="image/*">
										<canvas id="canvas" hidden></canvas>
									</div>
								</div>
								<div class="mask_content_list1" v-if="!active.edit_slide">
									<div class="mask_content_item">
										<label>图片地址</label>
										<input type="text">
										<!--<button>图片空间</button>-->
									</div>
									<!--<div class="mask_content_item">
										<label>图片说明</label>
										<input type="text">
									</div>-->
								</div>
								
							</div>
							<div class="mask_content_btn">
								<div class="btn_wrap">
									<button @click="confirmFun()">确定</button>
									<button @click="call_off()">取消</button>
								</div>
							</div>
						</div>
					</div>
					
				</div>
			</div>
			<!-- 分类 -->
			<div class="content clearfloat" style="display:none">
				<!--中间 box-->
				<div class="middle_box">
					<!--绝对定位=>设置图片，模拟手机-->
					<p class="phone_top"></p>
					<p class="phone_left"></p>
					<p class="phone_right"></p>
					<!--模拟手机的 wrap，背景图两边（img）-->
					<div class="html_wrpa">
						<!--水平居中-->
						<div class="html_box">
							<iframe src="../phone/classify/classify.html"></iframe>
						</div>
					</div>
					<p class="phone_bottom"></p>
				</div>
			</div>
			<!-- 购物车 -->
			<div class="content clearfloat" style="display:none">
				<!--中间 box-->
				<div class="middle_box">
					<!--绝对定位=>设置图片，模拟手机-->
					<p class="phone_top"></p>
					<p class="phone_left"></p>
					<p class="phone_right"></p>
					<!--模拟手机的 wrap，背景图两边（img）-->
					<div class="html_wrpa">
						<!--水平居中-->
						<div class="html_box">
							<!--隐藏滚动条-->
							<!--<div class="html_box_new"">-->
							<iframe class="html_box_new" src="../phone/shopping_cart/shopping_cart.html" frameborder="0"></iframe>
							<!--</div>-->
						</div>
					</div>
					<p class="phone_bottom"></p>
				</div>
			</div>
			<!-- 个人中心 -->
			<div class="content clearfloat" style="display:none">
				<!--中间 box-->
				<div class="middle_box">
					<!--绝对定位=>设置图片，模拟手机-->
					<p class="phone_top"></p>
					<p class="phone_left"></p>
					<p class="phone_right"></p>
					<!--模拟手机的 wrap，背景图两边（img）-->
					<div class="html_wrpa">
						<!--水平居中-->
						<div class="html_box" style="overflow: hidden;">
							<!--隐藏滚动条-->
							<iframe class="html_box_new" src="../phone/my/user.html"></iframe>
						</div>
					</div>

					<p class="phone_bottom"></p>
				</div>
			</div>

			<!--底部 wrap-->
			<div class="bottom_wrap">
				<p class="bottom_wrap_deposit hover_box" @click="depositFun()">保存模板</p>
			</div>
		</div>

		<script src="../../js/pc/public/jquery-1.8.3.js"></script>
		<!--public的js-->
		<!--<script src="../../js/pc/edit_index.js"></script>-->

		<script>
			$(document).ready(function() {

				// tba切换
				$(".tabs>li>a").click(function(e) {
					e.preventDefault();
					var $tar = $(e.target);
					var index = $tar.attr('data-toggle')
					if($tar.is("[data-toggle]")) {
						$tar.parent().addClass('active').siblings().removeClass('active')
						$('.wrapper').children('.content').eq(index).show().siblings('.content').hide()
					}
				})

			})
		</script>
		<script src="../../js/pc/public/vue.js"></script>
		<script src="../../js/pc/public/axios.min.js"></script>
		<script>
			// 深克隆，把引用数据类型的，分解成基础类型（克隆）
			// 第一个参数是数据，第二参数是数组或对象(想转换的类型)
			function clones(_type, _memory) {
				var newMemory = null;
				// 判断传过来的数据类型
				if(_type instanceof Array) {
					newMemory = _memory || [];
				} else {
					newMemory = _memory || {};
				}
				for(var x in _type) {
					//引用数据类型的 typeof为 object
					if(typeof _type[x] == "object") {
						newMemory[x] = (_type[x].constructor == Array) ? [] : {};
						clones(_type[x], newMemory[x]); //递归
					} else {
						// 数据赋值
						newMemory[x] = _type[x];
					}
				}
				return newMemory;
			}

			var newVue = new Vue({
				el: "#edit_app_wrap",
				data: {
					/*组件-选项*/
					componentTerm: [{
							name: "轮播",
							id: 'rotationId'
						},
						{
							name: "搜索框",
							id: 'searchId'
						},
						{
							name: "按钮组",
							id: 'bottonsId'
						},
						{
							name: "店招",
							id: 'signageId'
						},
						{
							name: "商品组",
							id: 'productListId'
						},
						{
							name: "公告",
							id: 'noticeId'
						},
						{
							name: "辅助空白",
							id: 'blankId'
						},
						{
							name: "广告",
							id: 'bannerId'
						},
						{
							name: '标题',
							id: 'titleId'
						}
					],

					/*拖拽需要的元素*/
					dragging: null,
					/*上传图片 box=> 显隐*/
					active: {
						edit_slide_mask: false,
						edit_slide: true,
					},
					/**
					 * 公共-对应显示-模板编辑;
					 * id:判断模块；
					 * key_num:判断-模块在页面的排序
					 * **/
					puStateObj: {
						id: null,
						/*初始化*/
						key_num: 0,
					},
					/*点击=>对应上传图片=>index*/
					upImgInd: null,
					/*本地-上传图片(单图)-初始化*/
					upImages: {
						name: '',
						baseUrl: '',
					},
					/*网络图片-上传-初始化*/
					networkImg: {
						name: '',
						baseUrl: '',
					},
					/* 页面渲染data || 传个后台-data ，对象形式*/
					backData: [
						/**初始化=>生产对应组件=>删除第一条数据array[0]。
						 * 如果，编辑页面=>先删除-下面的数据。
						 * **/
						{
							params: {},
							data: {}
						},
					],
					/*轮播图，数据初始化*/
					roObj: {
						/**组件id*/
						id: "rotationId",
						/**组件名*/
						temp: "rotation",
						/*页面渲染-组件位置，从0开始*/
						key_num: null,
						/**组件style*/
						params: {
							/*'rectangle' =>长方形，'square' =>正方形，'roundness'=>圆形*/
							butStyle: 'rectangle',
							/*'left'=>左，'center'=>中间，'right'=>右*/
							butPosition: 'center',
							/*按钮背景颜色，必须是16进制的色值，不能简写*/
							butColor: '#000000',
							/*按钮点击时的颜色，必须是16进制的色值，不能简写*/
							clickColor: '#f5f5f5',
						},
						data: {
							/*轮播的图片路径*/
							images: [
								{	
									/*图片名字*/
									name: '',
									/*图片路径*/
									imgUrl: '../../img/0005.png',
									/*跳转路径*/
									url: '',
								},
								{
									name: '',
									imgUrl: '../../img/0005.png',
									url: '',
								},
								{
									name: '',
									imgUrl: '../../img/0005.png',
									url: '',
								}
	
							],
						},
					},
					/*搜索框，数据初始化*/
					seObj: {
						/**组件id*/
						id: "searchId",
						/**组件名*/
						temp: "search",
						/*页面渲染-组件位置，从0开始*/
						key_num: null,
						/**组件style*/
						params: {
							/*0=>样式一，1=>样式二*/
							reStyle: 0,
							/*文字颜色*/
							textColor: '#999',
							/*边框颜色*/
							borderColor: '#ccc',
							/*背景颜色*/
							backColor: '#000',
						},
						data: {
							/*提示文字*/
							tipeText: '你会了么？',
						},
					},
					// 按钮组，数据初始化
					boObj: {
						/*id*/
						id: "bottonsId",
						temp: 'bottons',
						key_num: null,
						params: {
							/*图标样式*/
							iconStyle: 0,
							/*0=>样式一，1=>样式二*/
							iconNum: '20%',
							/*背景颜色*/
							iconColor: '',
							iconList: [{
									id: '1',
									text: '按钮文字',
									texts: "",
									location: '',
									url: '../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg',
									siezColor: '39'
								},
								{
									id: '2',
									text: '按钮文字',
									texts: "",
									location: '',
									url: '../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg',
									siezColor: '39'
								},
								{
									id: '3',
									text: '按钮文字',
									texts: "",
									location: '',
									url: '../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg',
									siezColor: '39'
								},
								{
									id: '4',
									text: '按钮文字',
									texts: "",
									location: '',
									url: '../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg',
									siezColor: '39'
								},
								{
									id: '5',
									text: '按钮文字',
									texts: "",
									location: '',
									url: '../../img/pc/phone/d058ccbf6c81800aedd20eb5b43533fa828b4752.jpg',
									siezColor: '39',
									show: 0
								}
							]
						}

					},
					/*商品组*/ 
					prObj:{
						/*id*/
						id: "productListId",
						temp: 'bottons',
						key_num: null,
						params: {
							
						},
						data: {

						}
					},

				},
				methods: {
					/*<< 拖拽*/
					handleDragStart(e, item) {
						this.dragging = item;
					},
					handleDragEnd(e, item) {
						this.dragging = null
					},
					//首先把div变成可以放置的元素，即重写dragenter/dragover
					handleDragOver(e) {
						e.dataTransfer.dropEffect = 'move' // e.dataTransfer.dropEffect="move";//在dragenter中针对放置目标来设置!
					},
					handleDragEnter(e, item) {
						e.dataTransfer.effectAllowed = "move" //为需要移动的元素设置dragstart事件
						if(item === this.dragging) {
							return
						}
						/*pc数据渲染的data*/
						const newItems = [...this.backData]
						const src = newItems.indexOf(this.dragging)
						const dst = newItems.indexOf(item)

						newItems.splice(dst, 0, ...newItems.splice(src, 1));
						/*重置--pc数据渲染的data*/
						this.backData = newItems;
						console.log('传-后台=>"拖拽" ', this.backData);
					},
					/* 拖拽 >>*/
					/*删除对应=>data*/
					delDataFun(_index) {
						console.log("删除index:", _index);
						console.log("后台data:", this.backData.length);
						if(this.backData.length == 1) {
							/*根据对应index=> 删除*/
							this.backData.splice(_index, 1, {
								params: {},
								data: {}
							});
							console.log('给个空的key值，好对应数据渲染', this.backData);
							/*初始化*/
							this.puStateObj = {
								id: null,
								/*初始化*/
								key_num: 0,
							}
							console.log('删除-对应模板!', this.puStateObj);
							return false;
						}
						this.backData.splice(_index, 1);
						/*初始化=>防止=>编辑-对应页面(报错)*/
						this.puStateObj = {
							id: null,
							/*初始化*/
							key_num: 0,
						}
						/*对应删除后=>对data渲染数据=>排序*/
						for(var l = _index; l < this.backData.length; l++) {
							this.backData[l]['key_num'] = l;
						}
						console.log('删除后-对应的data:', this.backData);
					},
					/*组件选项-按钮*/
					comTremFun(_id) {
						var that = this;
						/*轮播图*/
						if(_id === 'rotationId') {
							/*赋值对应的模块=>页面位置key_num*/
							that.roObj['key_num'] = that.backData.length;
							/*深克隆=>页面渲染-data*/
							that.backData.push(clones(that.roObj));
							//							console.log(that.backData[0]['id']);
							/**(一次性)--删除-backData[0]的初始数据(用来双向绑定)
							 * 该函数-'最后'执行的语句;
							 * **/
							if(that.backData[0]['id'] == undefined) {
								that.backData.shift();
								that.backData[0]['key_num'] = 0;
								console.log('清除掉-无用的值（数据双向绑定！）！');
							}
							console.log('传给后台数据', that.backData);
							return false;

						}
						/*搜索框*/
						if(_id === "searchId") {
							that.seObj['key_num'] = that.backData.length;
							that.backData.push(clones(that.seObj));
							/*改if语句-放在最后*/
							if(that.backData[0]['id'] == undefined) {
								that.backData.shift();
								that.backData[0]['key_num'] = 0;
								console.log('清除掉-无用的值（数据双向绑定！）！');
							}
							return false;
						}
						/*按钮组*/
						if(_id === "bottonsId") {
							that.boObj['key_num'] = that.backData.length;
							that.backData.push(clones(that.boObj));
							/*改if语句-放在最后*/
							if(that.backData[0]['id'] == undefined) {
								that.backData.shift();
								that.backData[0]['key_num'] = 0;
								console.log('清除掉-无用的值（数据双向绑定！）！');
							}
							return false;
						}
						/*商品组*/
						if(_id === "productListId") {
							that.prObj['key_num'] = that.backData.length;
							that.backData.push(clones(that.prObj));
							/*改if语句-放在最后*/
							if(that.backData[0]['id'] == undefined) {
								that.backData.shift();
								that.backData[0]['key_num'] = 0;
								console.log('清除掉-无用的值（数据双向绑定！）！');
							}
							return false;
						}

					},
					/*编辑对应的模板*/
					editMode(_id, _key) {
						console.log('点击对应模板:', _id, _key);
						this.puStateObj = {
							id: _id,
							key_num: _key
						}
						console.log('对应的模板：', this.puStateObj);

					},
					/*遮罩层-tab切换*/
					tabs() {
						this.active.edit_slide = !this.active.edit_slide;
					},
					/*上传图片=>遮罩层(显隐)*/
					call_off(_index) {
						this.active.edit_slide_mask = !this.active.edit_slide_mask;
						if(_index != undefined){
							/*点击'重新选择图片'时=>清除原始数据*/
							/*本地-单图上传-初始化*/
							this.upImages = {
								name: '',
								baseUrl: '',
							}
							/*网络-上传-初始化*/
							this.networkImg = {
								name: '',
								baseUrl: '',
							}
							this.upImgInd = _index;
							console.log('遮罩层:',_index);
						}
						
					},
					/*图片上传=> "确认"按钮*/
					confirmFun(){
						var that = this;
						if(!that.upImages['baseUrl'] && !that.networkImg['baseUrl']){
							alert('无数据上传，请选择需要上传的数据!');
							return false;
						}
						console.log('base64=>',that.upImages['baseUrl']);
						console.log('对应上传的index',that.upImgInd);
						/*ajax*/
						axios.post('http://zfwl.zhifengwangluo.c3w.cc/admin/shop/base_img', {
							img: that.upImages['baseUrl'],
						})
						.then(function (response) {
							console.log(response);
							/*当前id*/
							var thisID = that.puStateObj['id'];
							/*当前index*/
							var thisInd = that.puStateObj['key_num'];
							/*对应上传的图片index=>this.upImgInd*/
							/*轮播图*/
							if(thisID == 'rotationId'){
								that.backData[thisInd]['data']['images'][that.upImgInd]['imgUrl'] = response['data'];
								console.log(that.backData[thisInd]['data']['images'][that.upImgInd]['imgUrl']);
							}
						})
						.catch(function (error) {
							alert(error);
							console.log(error);
						});
					},
					/*图片上传*/
					up_imageFun(even){
						var that = this;
						var f = even.target.files[0];
						console.log(f,even.target.files);
						if(f){
						    fileType = f.type;  
						    if(/image\/\w+/.test(fileType)) {  
						        var fileReader = new FileReader();  
						        fileReader.readAsDataURL(f);  
						        fileReader.onload = function(event) {  
						            var result = event.target.result; //返回的dataURL   
						            var image = new Image();  
						            image.src = result;  
						            //若图片大小大于1M，压缩后再上传，否则直接上传  
						            if(f.size>1024*1024){     
						                    image.onload = function() { 
						                    //创建一个image对象，给canvas绘制使用
						                    var canvas = document.getElementById("canvas"); 
						                    canvas.width = image.width;  
						                    canvas.height = image.height; //计算等比缩小后图片宽高   
						                    var ctx = canvas.getContext('2d');  
						                    ctx.drawImage(this, 0, 0, canvas.width, canvas.height);  
						                    var newImageData = canvas.toDataURL(fileType, 0.8); //重新生成图片
						                   	/*图片=>base64、name*/
						                   	that.upImages['name'] = f['name'];
						                   	that.upImages['baseUrl'] = newImageData;
						                   	console.log('压缩:',that.upImages);
						                }  
						            }else{  
						            	//创建一个image对象，给canvas绘制使用 
						                image.onload = function() { 
						                	that.upImages['name'] = f['name'];
						                	that.upImages['baseUrl'] = result;
							                console.log('未-压缩:',that.upImages);
						            	}  
						            }  
						        }  
						    } else {  
						        alert("请选择图片");  
						    }  
						    
					    }else {
					    	console.log('取消选择图片！')
					    }
					},
					
					/*保存-模板*/
					depositFun() {
						var that = this;
						/**(一次性)--删除-backData[0]的初始数据(用来双向绑定)
						 * 最上面。
						 * **/
						if(that.backData[0]['id'] == undefined) {
							alert('请手动生产页面！');
							return false;
						}
						console.log('保存模板！！', that.backData);
					}

				},

			});
		</script>
	</body>

</html>